{
  "version": 3,
  "sources": ["../bundle-rPuPWi/strip-cf-connecting-ip-header.js", "wrangler-modules-watch:wrangler:modules-watch", "../../../node_modules/wrangler/templates/modules-watch-stub.js", "../../../src/integrations/oilprice.ts", "../../../src/routes/oil.ts", "../../../src/integrations/goldApi.ts", "../../../src/routes/gold.ts", "../../../src/integrations/finnhub.ts", "../../../src/routes/stocks.ts", "../../../src/core/cache.ts", "../../../src/integrations/marketaux.ts", "../../../src/routes/news.ts", "../../../src/core/promptBuilder.ts", "../../../src/integrations/gemini.ts", "../../../src/routes/aiAnalyze.ts", "../bundle-rPuPWi/middleware-loader.entry.ts", "../bundle-rPuPWi/middleware-insertion-facade.js", "../../../src/index.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../../../node_modules/wrangler/templates/middleware/common.ts"],
  "sourceRoot": "C:\\Users\\EAMASTER\\marketmind\\worker\\.wrangler\\tmp\\dev-P1Hmhq",
  "sourcesContent": ["function stripCfConnectingIPHeader(input, init) {\n\tconst request = new Request(input, init);\n\trequest.headers.delete(\"CF-Connecting-IP\");\n\treturn request;\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\treturn Reflect.apply(target, thisArg, [\n\t\t\tstripCfConnectingIPHeader.apply(null, argArray),\n\t\t]);\n\t},\n});\n", "", "// `esbuild` doesn't support returning `watch*` options from `onStart()`\n// plugin callbacks. Instead, we define an empty virtual module that is\n// imported by this injected file. Importing the module registers watchers.\nimport \"wrangler:modules-watch\";\n", "import type { Env, PricePoint, Timeframe } from '../core/types';\r\n\r\n// OilPriceAPI client\r\n// Docs: https://docs.oilpriceapi.com/\r\n\r\nexport async function getOilPrice(\r\n    code: string,\r\n    timeframe: Timeframe,\r\n    env: Env\r\n): Promise<PricePoint[]> {\r\n    const apiKey = env.OILPRICE_API_KEY;\r\n\r\n    if (!apiKey) {\r\n        console.warn('[OilPrice] No API key configured, using mock data');\r\n        return getMockOilData(code, timeframe);\r\n    }\r\n\r\n    try {\r\n        // Select the appropriate endpoint based on timeframe\r\n        const endpoint = getEndpointForTimeframe(timeframe);\r\n        const url = `https://api.oilpriceapi.com/v1${endpoint}?by_code=${code}`;\r\n\r\n        console.log(`[OilPrice] Fetching ${code} for ${timeframe} from ${endpoint}`);\r\n\r\n        const response = await fetch(url, {\r\n            headers: {\r\n                'Authorization': `Token ${apiKey}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error('[OilPrice] API error:', response.status, response.statusText, errorText);\r\n            throw new Error(`OilPriceAPI error: ${response.status} ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(`[OilPrice] Raw API response:`, JSON.stringify(data).substring(0, 500));\r\n\r\n        // Normalize response to PricePoint format\r\n        const normalizedData = normalizeOilPriceData(data, code, timeframe);\r\n        console.log(`[OilPrice] Normalized ${normalizedData.length} data points`);\r\n\r\n        return normalizedData;\r\n    } catch (error) {\r\n        console.error('[OilPrice] Error fetching data:', error);\r\n        console.warn('[OilPrice] Falling back to mock data');\r\n        // Fallback to mock data\r\n        return getMockOilData(code, timeframe);\r\n    }\r\n}\r\n\r\nfunction getEndpointForTimeframe(timeframe: Timeframe): string {\r\n    switch (timeframe) {\r\n        case '1D':\r\n            return '/prices/past_day';\r\n        case '1W':\r\n            return '/prices/past_week';\r\n        case '1M':\r\n            return '/prices/past_month';\r\n        default:\r\n            return '/prices/latest';\r\n    }\r\n}\r\n\r\nfunction normalizeOilPriceData(apiData: any, code: string, timeframe: Timeframe): PricePoint[] {\r\n    console.log(`[OilPrice] Normalizing data for ${code}, timeframe: ${timeframe}`);\r\n\r\n    // Check response structure\r\n    if (!apiData?.status || apiData.status !== 'success') {\r\n        console.warn('[OilPrice] API response not successful:', apiData);\r\n        return [];\r\n    }\r\n\r\n    if (!apiData?.data) {\r\n        console.warn('[OilPrice] No data in API response');\r\n        return [];\r\n    }\r\n\r\n    // For historical endpoints, data structure is:\r\n    // { status: \"success\", data: { \"WTI_USD\": [{ price: 78.45, timestamp: \"...\" }, ...] } }\r\n    const codeData = apiData.data[code];\r\n\r\n    if (!codeData) {\r\n        console.warn(`[OilPrice] No data for code ${code} in response`);\r\n        console.log(`[OilPrice] Available codes:`, Object.keys(apiData.data));\r\n        return [];\r\n    }\r\n\r\n    // Historical endpoints return arrays\r\n    if (Array.isArray(codeData)) {\r\n        console.log(`[OilPrice] Processing ${codeData.length} historical data points`);\r\n        return codeData.map((point: any) => ({\r\n            timestamp: point.timestamp || new Date().toISOString(),\r\n            close: point.price || 0,\r\n            // OilPrice API doesn't provide OHLC, only price\r\n        }));\r\n    }\r\n\r\n    // Latest endpoint returns single object\r\n    if (typeof codeData === 'object' && codeData.price) {\r\n        console.log('[OilPrice] Processing single latest price point');\r\n        return [{\r\n            timestamp: codeData.timestamp || new Date().toISOString(),\r\n            close: codeData.price,\r\n        }];\r\n    }\r\n\r\n    console.warn('[OilPrice] Unexpected data format:', typeof codeData);\r\n    return [];\r\n}\r\n\r\nfunction getMockOilData(code: string, timeframe: Timeframe): PricePoint[] {\r\n    console.log(`[OilPrice] Generating ${timeframe} mock data for ${code}`);\r\n\r\n    const basePrice = code === 'WTI_USD' ? 75.5 : 78.2;\r\n    const points = timeframe === '1D' ? 78 : timeframe === '1W' ? 168 : 30;\r\n    const interval = timeframe === '1D' ? 5 * 60 * 1000 : timeframe === '1W' ? 60 * 60 * 1000 : 24 * 60 * 60 * 1000;\r\n\r\n    const now = Date.now();\r\n    const data: PricePoint[] = [];\r\n\r\n    for (let i = 0; i < points; i++) {\r\n        const timestamp = new Date(now - (points - i - 1) * interval).toISOString();\r\n        const volatility = (Math.random() - 0.5) * 2;\r\n        const trend = i * 0.01;\r\n        const close = basePrice + volatility + trend;\r\n\r\n        data.push({\r\n            timestamp,\r\n            close: Number(close.toFixed(2)),\r\n            open: Number((close + (Math.random() - 0.5) * 0.5).toFixed(2)),\r\n            high: Number((close + Math.random() * 0.5).toFixed(2)),\r\n            low: Number((close - Math.random() * 0.5).toFixed(2)),\r\n        });\r\n    }\r\n\r\n    return data;\r\n}\r\n", "import type { Env, AssetDataResponse } from '../core/types';\r\nimport { getOilPrice } from '../integrations/oilprice';\r\n\r\nexport async function handleOilRequest(\r\n    request: Request,\r\n    env: Env,\r\n    corsHeaders: Record<string, string>\r\n): Promise<Response> {\r\n    const url = new URL(request.url);\r\n    const code = url.searchParams.get('code') || 'WTI_USD';\r\n    const timeframe = (url.searchParams.get('timeframe') || '1D') as '1D' | '1W' | '1M';\r\n\r\n    try {\r\n        const data = await getOilPrice(code, timeframe, env);\r\n\r\n        const response: AssetDataResponse = {\r\n            data,\r\n            metadata: {\r\n                symbol: code,\r\n                timeframe,\r\n                assetType: 'oil',\r\n            },\r\n        };\r\n\r\n        return new Response(JSON.stringify(response), {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...corsHeaders,\r\n            },\r\n        });\r\n    } catch (error) {\r\n        return new Response(\r\n            JSON.stringify({\r\n                error: 'Failed to fetch oil data',\r\n                message: error instanceof Error ? error.message : 'Unknown error',\r\n            }),\r\n            {\r\n                status: 500,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    ...corsHeaders,\r\n                },\r\n            }\r\n        );\r\n    }\r\n}\r\n", "import type { Env, PricePoint, Timeframe } from '../core/types';\r\n\r\n// Gold API client\r\n// Docs: https://www.goldapi.io/documentation\r\n\r\nexport async function getGoldPrice(\r\n    symbol: string,\r\n    timeframe: Timeframe,\r\n    env: Env\r\n): Promise<PricePoint[]> {\r\n    const apiKey = env.GOLD_API_KEY;\r\n\r\n    if (!apiKey) {\r\n        console.warn('[GoldAPI] No API key configured, using mock data');\r\n        return getMockGoldData(symbol, timeframe);\r\n    }\r\n\r\n    try {\r\n        // Fetch current price for the symbol\r\n        // Gold API uses symbols like XAU/USD, XAG/USD\r\n        const pairSymbol = `${symbol}/USD`;\r\n        const url = `https://www.goldapi.io/api/${pairSymbol}`;\r\n\r\n        console.log(`[GoldAPI] Fetching ${pairSymbol} for ${timeframe}`);\r\n\r\n        const response = await fetch(url, {\r\n            headers: {\r\n                'x-access-token': apiKey,\r\n            },\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error('[GoldAPI] API error:', response.status, response.statusText, errorText);\r\n            throw new Error(`Gold API error: ${response.status} ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(`[GoldAPI] Raw API response:`, JSON.stringify(data).substring(0, 300));\r\n\r\n        const normalized = normalizeGoldPriceData(data);\r\n        console.log(`[GoldAPI] Normalized ${normalized.length} data points`);\r\n\r\n        return normalized;\r\n    } catch (error) {\r\n        console.error('[GoldAPI] Error fetching data:', error);\r\n        console.warn('[GoldAPI] Falling back to mock data');\r\n        return getMockGoldData(symbol, timeframe);\r\n    }\r\n}\r\n\r\nfunction normalizeGoldPriceData(apiData: any): PricePoint[] {\r\n    // API response structure: { price: number, timestamp: number, ... }\r\n    if (!apiData?.price) {\r\n        console.warn('[GoldAPI] No price in API response');\r\n        return [];\r\n    }\r\n\r\n    console.log(`[GoldAPI] Price: ${apiData.price}, Timestamp: ${apiData.timestamp}`);\r\n\r\n    return [{\r\n        timestamp: new Date((apiData.timestamp || Date.now()) * 1000).toISOString(),\r\n        close: apiData.price,\r\n        open: apiData.open_price,\r\n        high: apiData.high_price,\r\n        low: apiData.low_price,\r\n    }];\r\n}\r\n\r\nfunction getMockGoldData(symbol: string, timeframe: Timeframe): PricePoint[] {\r\n    console.log(`[GoldAPI] Generating ${timeframe} mock data for ${symbol}`);\r\n\r\n    const basePrice = symbol === 'XAU' ? 2050 : 23.5;\r\n    const points = timeframe === '1D' ? 78 : timeframe === '1W' ? 168 : 30;\r\n    const interval = timeframe === '1D' ? 5 * 60 * 1000 : timeframe === '1W' ? 60 * 60 * 1000 : 24 * 60 * 60 * 1000;\r\n\r\n    const now = Date.now();\r\n    const data: PricePoint[] = [];\r\n\r\n    for (let i = 0; i < points; i++) {\r\n        const timestamp = new Date(now - (points - i - 1) * interval).toISOString();\r\n        const volatility = (Math.random() - 0.5) * (basePrice * 0.01);\r\n        const trend = i * 0.05;\r\n        const close = basePrice + volatility + trend;\r\n\r\n        data.push({\r\n            timestamp,\r\n            close: Number(close.toFixed(2)),\r\n            open: Number((close + (Math.random() - 0.5) * 2).toFixed(2)),\r\n            high: Number((close + Math.random() * 2).toFixed(2)),\r\n            low: Number((close - Math.random() * 2).toFixed(2)),\r\n        });\r\n    }\r\n\r\n    return data;\r\n}\r\n", "import type { Env, AssetDataResponse } from '../core/types';\r\nimport { getGoldPrice } from '../integrations/goldApi';\r\n\r\nexport async function handleGoldRequest(\r\n    request: Request,\r\n    env: Env,\r\n    corsHeaders: Record<string, string>\r\n): Promise<Response> {\r\n    const url = new URL(request.url);\r\n    const symbol = url.searchParams.get('symbol') || 'XAU';\r\n    const timeframe = (url.searchParams.get('timeframe') || '1D') as '1D' | '1W' | '1M';\r\n\r\n    try {\r\n        const data = await getGoldPrice(symbol, timeframe, env);\r\n\r\n        const response: AssetDataResponse = {\r\n            data,\r\n            metadata: {\r\n                symbol,\r\n                timeframe,\r\n                assetType: 'metal',\r\n            },\r\n        };\r\n\r\n        return new Response(JSON.stringify(response), {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...corsHeaders,\r\n            },\r\n        });\r\n    } catch (error) {\r\n        return new Response(\r\n            JSON.stringify({\r\n                error: 'Failed to fetch gold data',\r\n                message: error instanceof Error ? error.message : 'Unknown error',\r\n            }),\r\n            {\r\n                status: 500,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    ...corsHeaders,\r\n                },\r\n            }\r\n        );\r\n    }\r\n}\r\n", "import type { Env, PricePoint, Timeframe } from '../core/types';\r\n\r\n// Finnhub client for stock data\r\n// Docs: https://finnhub.io/docs/api\r\n\r\nexport async function getStockCandles(\r\n    symbol: string,\r\n    timeframe: Timeframe,\r\n    env: Env\r\n): Promise<PricePoint[]> {\r\n    const apiKey = env.FINNHUB_API_KEY;\r\n\r\n    if (!apiKey) {\r\n        console.warn('[Finnhub] No API key configured, using mock data');\r\n        return getMockStockData(symbol, timeframe);\r\n    }\r\n\r\n    try {\r\n        const { resolution, from, to } = getTimeframeParams(timeframe);\r\n\r\n        const url = new URL('https://finnhub.io/api/v1/stock/candle');\r\n        url.searchParams.set('symbol', symbol);\r\n        url.searchParams.set('resolution', resolution);\r\n        url.searchParams.set('from', from.toString());\r\n        url.searchParams.set('to', to.toString());\r\n        url.searchParams.set('token', apiKey);\r\n\r\n        console.log(`[Finnhub] Fetching ${symbol} candles: ${timeframe} (resolution: ${resolution})`);\r\n        console.log(`[Finnhub] URL: ${url.toString().replace(apiKey, 'API_KEY')}`);\r\n\r\n        const response = await fetch(url.toString());\r\n\r\n        if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error('[Finnhub] API error:', response.status, response.statusText, errorText);\r\n            throw new Error(`Finnhub API error: ${response.status} ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(`[Finnhub] Raw API response status:`, data.s);\r\n        console.log(`[Finnhub] Data points count:`, data.t?.length || 0);\r\n\r\n        const normalizedData = normalizeStockData(data);\r\n        console.log(`[Finnhub] Normalized ${normalizedData.length} candles`);\r\n\r\n        return normalizedData;\r\n    } catch (error) {\r\n        console.error('[Finnhub] Error fetching data:', error);\r\n        console.warn('[Finnhub] Falling back to mock data');\r\n        return getMockStockData(symbol, timeframe);\r\n    }\r\n}\r\n\r\nfunction getTimeframeParams(timeframe: Timeframe): { resolution: string; from: number; to: number } {\r\n    const now = Math.floor(Date.now() / 1000);\r\n\r\n    switch (timeframe) {\r\n        case '1D':\r\n            return {\r\n                resolution: '5', // 5-minute intervals\r\n                from: now - 24 * 60 * 60,\r\n                to: now,\r\n            };\r\n        case '1W':\r\n            return {\r\n                resolution: '60', // 1-hour intervals\r\n                from: now - 7 * 24 * 60 * 60,\r\n                to: now,\r\n            };\r\n        case '1M':\r\n            return {\r\n                resolution: 'D', // Daily intervals\r\n                from: now - 30 * 24 * 60 * 60,\r\n                to: now,\r\n            };\r\n    }\r\n}\r\n\r\nfunction normalizeStockData(apiData: any): PricePoint[] {\r\n    // Finnhub returns: { c: [close], h: [high], l: [low], o: [open], t: [timestamp], v: [volume], s: status }\r\n    if (apiData.s !== 'ok') {\r\n        console.warn('[Finnhub] API response status not OK:', apiData.s);\r\n        return [];\r\n    }\r\n\r\n    if (!apiData.t || apiData.t.length === 0) {\r\n        console.warn('[Finnhub] No timestamp data in response');\r\n        return [];\r\n    }\r\n\r\n    console.log(`[Finnhub] Processing ${apiData.t.length} candles`);\r\n    const data: PricePoint[] = [];\r\n\r\n    for (let i = 0; i < apiData.t.length; i++) {\r\n        data.push({\r\n            timestamp: new Date(apiData.t[i] * 1000).toISOString(),\r\n            open: apiData.o?.[i],\r\n            high: apiData.h?.[i],\r\n            low: apiData.l?.[i],\r\n            close: apiData.c[i],\r\n            volume: apiData.v?.[i],\r\n        });\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nfunction getMockStockData(symbol: string, timeframe: Timeframe): PricePoint[] {\r\n    console.log(`[Finnhub] Generating ${timeframe} mock data for ${symbol}`);\r\n\r\n    const basePrice = symbol === 'AAPL' ? 180 : symbol === 'TSLA' ? 240 : 450;\r\n    const points = timeframe === '1D' ? 78 : timeframe === '1W' ? 168 : 30;\r\n    const interval = timeframe === '1D' ? 5 * 60 * 1000 : timeframe === '1W' ? 60 * 60 * 1000 : 24 * 60 * 60 * 1000;\r\n\r\n    const now = Date.now();\r\n    const data: PricePoint[] = [];\r\n\r\n    for (let i = 0; i < points; i++) {\r\n        const timestamp = new Date(now - (points - i - 1) * interval).toISOString();\r\n        const volatility = (Math.random() - 0.5) * (basePrice * 0.02);\r\n        const trend = i * 0.1;\r\n        const close = basePrice + volatility + trend;\r\n\r\n        const open = close + (Math.random() - 0.5) * 2;\r\n        const high = Math.max(open, close) + Math.random() * 1.5;\r\n        const low = Math.min(open, close) - Math.random() * 1.5;\r\n\r\n        data.push({\r\n            timestamp,\r\n            open: Number(open.toFixed(2)),\r\n            high: Number(high.toFixed(2)),\r\n            low: Number(low.toFixed(2)),\r\n            close: Number(close.toFixed(2)),\r\n            volume: Math.floor(Math.random() * 10000000),\r\n        });\r\n    }\r\n\r\n    return data;\r\n}\r\n", "import type { Env, AssetDataResponse } from '../core/types';\r\nimport { getStockCandles } from '../integrations/finnhub';\r\n\r\nexport async function handleStocksRequest(\r\n    request: Request,\r\n    env: Env,\r\n    corsHeaders: Record<string, string>\r\n): Promise<Response> {\r\n    const url = new URL(request.url);\r\n    const symbol = url.searchParams.get('symbol') || 'AAPL';\r\n    const timeframe = (url.searchParams.get('timeframe') || '1D') as '1D' | '1W' | '1M';\r\n\r\n    try {\r\n        const data = await getStockCandles(symbol, timeframe, env);\r\n\r\n        const response: AssetDataResponse = {\r\n            data,\r\n            metadata: {\r\n                symbol,\r\n                timeframe,\r\n                assetType: 'stock',\r\n            },\r\n        };\r\n\r\n        return new Response(JSON.stringify(response), {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...corsHeaders,\r\n            },\r\n        });\r\n    } catch (error) {\r\n        return new Response(\r\n            JSON.stringify({\r\n                error: 'Failed to fetch stock data',\r\n                message: error instanceof Error ? error.message : 'Unknown error',\r\n            }),\r\n            {\r\n                status: 500,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    ...corsHeaders,\r\n                },\r\n            }\r\n        );\r\n    }\r\n}\r\n", "// Cache helpers using Cloudflare Workers Cache API\r\n\r\nconst CACHE_VERSION = 'v1';\r\nconst DEFAULT_TTL = 30 * 60; // 30 minutes in seconds\r\n\r\nexport async function getCachedData<T>(key: string): Promise<T | null> {\r\n    const cache = caches.default;\r\n    const cacheKey = `${CACHE_VERSION}:${key}`;\r\n    const cacheUrl = new URL(`https://cache.marketmind/${cacheKey}`);\r\n\r\n    const response = await cache.match(cacheUrl);\r\n\r\n    if (!response) {\r\n        return null;\r\n    }\r\n\r\n    try {\r\n        return await response.json();\r\n    } catch {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function setCachedData<T>(\r\n    key: string,\r\n    data: T,\r\n    ttl: number = DEFAULT_TTL\r\n): Promise<void> {\r\n    const cache = caches.default;\r\n    const cacheKey = `${CACHE_VERSION}:${key}`;\r\n    const cacheUrl = new URL(`https://cache.marketmind/${cacheKey}`);\r\n\r\n    const response = new Response(JSON.stringify(data), {\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Cache-Control': `max-age=${ttl}`,\r\n        },\r\n    });\r\n\r\n    await cache.put(cacheUrl, response);\r\n}\r\n\r\nexport async function invalidateCache(key: string): Promise<void> {\r\n    const cache = caches.default;\r\n    const cacheKey = `${CACHE_VERSION}:${key}`;\r\n    const cacheUrl = new URL(`https://cache.marketmind/${cacheKey}`);\r\n\r\n    await cache.delete(cacheUrl);\r\n}\r\n", "import type { Env, NewsArticle, SentimentSummary, AssetType, Timeframe } from '../core/types';\r\n\r\n// Marketaux news API client\r\n// Docs: https://www.marketaux.com/documentation\r\n\r\nexport async function getNews(\r\n    assetType: AssetType,\r\n    symbol: string | undefined,\r\n    timeframe: Timeframe,\r\n    env: Env\r\n): Promise<{ articles: NewsArticle[]; sentiment: SentimentSummary }> {\r\n    const apiToken = env.MARKETAUX_API_TOKEN;\r\n\r\n    if (!apiToken) {\r\n        console.warn('[Marketaux] No API token configured, using mock data');\r\n        return getMockNews(assetType, symbol);\r\n    }\r\n\r\n    try {\r\n        const url = buildNewsUrl(assetType, symbol, apiToken);\r\n        console.log(`[Marketaux] Fetching news for ${assetType} ${symbol || ''} (${timeframe})`);\r\n        console.log(`[Marketaux] URL: ${url.toString().replace(apiToken, 'API_TOKEN')}`);\r\n\r\n        const response = await fetch(url.toString());\r\n        console.log(`[Marketaux] Response status: ${response.status}`);\r\n\r\n        if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error('[Marketaux] API error:', response.status, response.statusText, errorText);\r\n            throw new Error(`Marketaux API error: ${response.status} ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(`[Marketaux] Received ${data?.data?.length || 0} articles`);\r\n        const normalized = normalizeNewsData(data);\r\n        console.log(`[Marketaux] Normalized ${normalized.articles.length} articles, sentiment: ${normalized.sentiment.label}`);\r\n        return normalized;\r\n    } catch (error) {\r\n        console.error('[Marketaux] Error fetching data:', error);\r\n        console.warn('[Marketaux] Falling back to mock data');\r\n        return getMockNews(assetType, symbol);\r\n    }\r\n}\r\n\r\nfunction buildNewsUrl(assetType: AssetType, symbol: string | undefined, apiToken: string): URL {\r\n    const url = new URL('https://api.marketaux.com/v1/news/all');\r\n\r\n    url.searchParams.set('api_token', apiToken);\r\n    url.searchParams.set('language', 'en');\r\n    url.searchParams.set('limit', '10');\r\n    url.searchParams.set('must_have_entities', 'true');\r\n    url.searchParams.set('filter_entities', 'true');\r\n    url.searchParams.set('group_similar', 'true');\r\n\r\n    // Build query based on asset type\r\n    if (assetType === 'stock' && symbol) {\r\n        url.searchParams.set('symbols', symbol);\r\n    } else if (assetType === 'oil') {\r\n        url.searchParams.set('industries', 'Energy');\r\n        url.searchParams.set('search', 'crude oil OR WTI OR Brent');\r\n    } else if (assetType === 'metal') {\r\n        url.searchParams.set('search', 'gold OR silver OR precious metals');\r\n    }\r\n\r\n    return url;\r\n}\r\n\r\nfunction normalizeNewsData(apiData: any): { articles: NewsArticle[]; sentiment: SentimentSummary } {\r\n    if (!apiData?.data || !Array.isArray(apiData.data)) {\r\n        console.warn('[Marketaux] Invalid data structure in API response');\r\n        return { articles: [], sentiment: { score: null, label: 'neutral' } };\r\n    }\r\n\r\n    const articles: NewsArticle[] = apiData.data.map((item: any) => ({\r\n        id: item.uuid || item.url,\r\n        title: item.title,\r\n        url: item.url,\r\n        snippet: item.snippet || item.description || '',\r\n        publishedAt: item.published_at,\r\n        source: item.source,\r\n        sentimentScore: item.entities?.[0]?.sentiment_score,\r\n    }));\r\n\r\n    // Calculate aggregate sentiment\r\n    const sentiment = calculateSentiment(articles);\r\n\r\n    return { articles, sentiment };\r\n}\r\n\r\nfunction calculateSentiment(articles: NewsArticle[]): SentimentSummary {\r\n    const scores = articles\r\n        .map(a => a.sentimentScore)\r\n        .filter((s): s is number => s !== undefined && s !== null);\r\n\r\n    if (scores.length === 0) {\r\n        return { score: null, label: 'neutral' };\r\n    }\r\n\r\n    const avgScore = scores.reduce((sum, s) => sum + s, 0) / scores.length;\r\n\r\n    let label: 'bullish' | 'bearish' | 'neutral';\r\n    if (avgScore > 0.1) {\r\n        label = 'bullish';\r\n    } else if (avgScore < -0.1) {\r\n        label = 'bearish';\r\n    } else {\r\n        label = 'neutral';\r\n    }\r\n\r\n    return { score: Number(avgScore.toFixed(3)), label };\r\n}\r\n\r\nfunction getMockNews(assetType: AssetType, symbol?: string): { articles: NewsArticle[]; sentiment: SentimentSummary } {\r\n    console.log(`[Marketaux] Generating mock news for ${assetType} ${symbol || ''}`);\r\n\r\n    const mockArticles: NewsArticle[] = [\r\n        {\r\n            id: '1',\r\n            title: `${symbol || assetType.toUpperCase()} shows strong performance amid market volatility`,\r\n            url: 'https://example.com/news/1',\r\n            snippet: 'Market analysts report positive trends in recent trading sessions...',\r\n            publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\r\n            source: 'Financial Times',\r\n            sentimentScore: 0.6,\r\n        },\r\n        {\r\n            id: '2',\r\n            title: 'Global economic factors impact commodity prices',\r\n            url: 'https://example.com/news/2',\r\n            snippet: 'Recent geopolitical events have created uncertainty in global markets...',\r\n            publishedAt: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString(),\r\n            source: 'Bloomberg',\r\n            sentimentScore: -0.2,\r\n        },\r\n        {\r\n            id: '3',\r\n            title: 'Analysts remain cautiously optimistic about Q4 outlook',\r\n            url: 'https://example.com/news/3',\r\n            snippet: 'Despite recent volatility, long-term fundamentals remain strong...',\r\n            publishedAt: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(),\r\n            source: 'Reuters',\r\n            sentimentScore: 0.3,\r\n        },\r\n    ];\r\n\r\n    return {\r\n        articles: mockArticles,\r\n        sentiment: { score: 0.23, label: 'bullish' },\r\n    };\r\n}\r\n", "import type { Env, NewsResponse, AssetType, Timeframe } from '../core/types';\r\nimport { getCachedData, setCachedData } from '../core/cache';\r\nimport { getNews } from '../integrations/marketaux';\r\n\r\nexport async function handleNewsRequest(\r\n    request: Request,\r\n    env: Env,\r\n    corsHeaders: Record<string, string>\r\n): Promise<Response> {\r\n    const url = new URL(request.url);\r\n    const assetType = (url.searchParams.get('assetType') || 'stock') as AssetType;\r\n    const symbol = url.searchParams.get('symbol') || undefined;\r\n    const timeframe = (url.searchParams.get('timeframe') || '1D') as Timeframe;\r\n\r\n    // Build cache key\r\n    const cacheKey = `news:${assetType}:${symbol || 'general'}:${timeframe}`;\r\n\r\n    try {\r\n        // Try to get from cache first\r\n        const cached = await getCachedData<NewsResponse>(cacheKey);\r\n        if (cached) {\r\n            return new Response(JSON.stringify(cached), {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'X-Cache': 'HIT',\r\n                    ...corsHeaders,\r\n                },\r\n            });\r\n        }\r\n\r\n        // Not in cache, fetch from Marketaux\r\n        const newsData = await getNews(assetType, symbol, timeframe, env);\r\n\r\n        // Cache for 30 minutes\r\n        await setCachedData(cacheKey, newsData, 30 * 60);\r\n\r\n        return new Response(JSON.stringify(newsData), {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-Cache': 'MISS',\r\n                ...corsHeaders,\r\n            },\r\n        });\r\n    } catch (error) {\r\n        return new Response(\r\n            JSON.stringify({\r\n                error: 'Failed to fetch news data',\r\n                message: error instanceof Error ? error.message : 'Unknown error',\r\n            }),\r\n            {\r\n                status: 500,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    ...corsHeaders,\r\n                },\r\n            }\r\n        );\r\n    }\r\n}\r\n", "import type { PricePoint, NewsArticle } from '../core/types';\r\n\r\n// Build a compact, structured prompt for Gemini from market data\r\n\r\ninterface PromptInput {\r\n    assetType: 'stock' | 'oil' | 'metal';\r\n    symbol?: string;\r\n    timeframe: '1D' | '1W' | '1M';\r\n    chartData: PricePoint[];\r\n    news: NewsArticle[];\r\n    question: string;\r\n}\r\n\r\nexport function buildPrompt(input: PromptInput): string {\r\n    const { assetType, symbol, timeframe, chartData, news, question } = input;\r\n\r\n    // Summarize chart data\r\n    const chartSummary = summarizeChartData(chartData);\r\n\r\n    // Extract key news headlines\r\n    const newsSummary = summarizeNews(news.slice(0, 5)); // Top 5 most recent\r\n\r\n    const assetName = symbol || assetType.toUpperCase();\r\n\r\n    return `You are a financial market analyst assistant. Answer the following question based on the provided market data and recent news. Be concise and grounded in the data.\r\n\r\n**Asset:** ${assetName} (${assetType})\r\n**Timeframe:** ${timeframe}\r\n\r\n**Market Data Summary:**\r\n${chartSummary}\r\n\r\n**Recent News & Sentiment:**\r\n${newsSummary}\r\n\r\n**User Question:** ${question}\r\n\r\n**Instructions:**\r\n- Base your analysis on the provided chart data and news.\r\n- Clearly connect price movements with specific news events when plausible.\r\n- If no clear linkage exists, acknowledge uncertainty.\r\n- Be concise and actionable (2-3 paragraphs max).\r\n`;\r\n}\r\n\r\nfunction summarizeChartData(data: PricePoint[]): string {\r\n    if (data.length === 0) {\r\n        return 'No price data available.';\r\n    }\r\n\r\n    const first = data[0];\r\n    const last = data[data.length - 1];\r\n    const prices = data.map(d => d.close);\r\n    const high = Math.max(...prices);\r\n    const low = Math.min(...prices);\r\n\r\n    const change = last.close - first.close;\r\n    const changePercent = ((change / first.close) * 100).toFixed(2);\r\n    const trend = change > 0 ? 'upward' : change < 0 ? 'downward' : 'flat';\r\n\r\n    // Calculate volatility (simple standard deviation)\r\n    const mean = prices.reduce((sum, p) => sum + p, 0) / prices.length;\r\n    const variance = prices.reduce((sum, p) => sum + Math.pow(p - mean, 2), 0) / prices.length;\r\n    const stdDev = Math.sqrt(variance);\r\n    const volatility = ((stdDev / mean) * 100).toFixed(2);\r\n\r\n    return `- Current Price: $${last.close.toFixed(2)}\r\n- Price Range: $${low.toFixed(2)} - $${high.toFixed(2)}\r\n- Change: ${change > 0 ? '+' : ''}$${change.toFixed(2)} (${changePercent}%)\r\n- Trend: ${trend}\r\n- Volatility: ${volatility}% (standard deviation)\r\n- Data Points: ${data.length}`;\r\n}\r\n\r\nfunction summarizeNews(articles: NewsArticle[]): string {\r\n    if (articles.length === 0) {\r\n        return 'No recent news available.';\r\n    }\r\n\r\n    return articles\r\n        .map((article, idx) => {\r\n            const sentiment = article.sentimentScore !== undefined && article.sentimentScore !== null\r\n                ? article.sentimentScore > 0\r\n                    ? '\uD83D\uDCC8 Positive'\r\n                    : article.sentimentScore < 0\r\n                        ? '\uD83D\uDCC9 Negative'\r\n                        : '\u27A1\uFE0F Neutral'\r\n                : '\u2753 Unknown';\r\n\r\n            const timeAgo = getTimeAgo(article.publishedAt);\r\n\r\n            return `${idx + 1}. [${sentiment}] \"${article.title}\" - ${article.source} (${timeAgo})`;\r\n        })\r\n        .join('\\n');\r\n}\r\n\r\nfunction getTimeAgo(timestamp: string): string {\r\n    const diff = Date.now() - new Date(timestamp).getTime();\r\n    const hours = Math.floor(diff / (1000 * 60 * 60));\r\n\r\n    if (hours < 1) return 'Just now';\r\n    if (hours === 1) return '1 hour ago';\r\n    if (hours < 24) return `${hours} hours ago`;\r\n\r\n    const days = Math.floor(hours / 24);\r\n    if (days === 1) return '1 day ago';\r\n    return `${days} days ago`;\r\n}\r\n", "import type { Env, PricePoint, NewsArticle } from '../core/types';\r\n\r\n// Google Gemini API client\r\n// Docs: https://ai.google.dev/gemini-api/docs\r\n\r\ninterface AnalyzeInput {\r\n    assetType: 'stock' | 'oil' | 'metal';\r\n    symbol?: string;\r\n    timeframe: '1D' | '1W' | '1M';\r\n    chartData: PricePoint[];\r\n    news: NewsArticle[];\r\n    question: string;\r\n}\r\n\r\nexport async function analyzeMarketContext(\r\n    input: AnalyzeInput,\r\n    prompt: string,\r\n    env: Env\r\n): Promise<string> {\r\n    const apiKey = env.GEMINI_API_KEY;\r\n\r\n    if (!apiKey) {\r\n        console.warn('GEMINI_API_KEY not configured, returning mock response');\r\n        return getMockAnalysis(input);\r\n    }\r\n\r\n    try {\r\n        // Using Gemini 1.5 Pro (latest stable model)\r\n        // For Gemini 2.0 Flash or specific preview models, update the model name\r\n        const model = 'gemini-1.5-pro';\r\n        const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;\r\n\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                contents: [{\r\n                    parts: [{\r\n                        text: prompt,\r\n                    }],\r\n                }],\r\n                generationConfig: {\r\n                    temperature: 0.7,\r\n                    maxOutputTokens: 800,\r\n                },\r\n            }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const error = await response.text();\r\n            throw new Error(`Gemini API error: ${response.statusText} - ${error}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        // Extract the generated text\r\n        const answer = data.candidates?.[0]?.content?.parts?.[0]?.text || 'No response generated.';\r\n\r\n        return answer;\r\n    } catch (error) {\r\n        console.error('Gemini API error:', error);\r\n        return getMockAnalysis(input);\r\n    }\r\n}\r\n\r\nfunction getMockAnalysis(input: AnalyzeInput): string {\r\n    const { assetType, symbol, question } = input;\r\n    const assetName = symbol || assetType.toUpperCase();\r\n\r\n    return `Based on the recent market data for ${assetName}, here's my analysis:\r\n\r\n**Market Overview:**\r\nThe asset has shown moderate volatility over the selected timeframe. The price movement appears to be influenced by a combination of broader market sentiment and specific news events related to the sector.\r\n\r\n**Key Factors:**\r\n1. Recent news sentiment is showing a slight bullish bias, with positive developments in the industry.\r\n2. Technical indicators suggest the current trend is sustainable in the near term, though caution is warranted given overall market conditions.\r\n3. Volume patterns indicate healthy market participation.\r\n\r\n**Answer to your question (\"${question}\"):**\r\nWhile I can see general market trends in the data provided, for a more precise answer, I would need access to additional fundamental data and longer-term historical context. Based on current indicators, the outlook appears cautiously optimistic.\r\n\r\n*Note: This is a simulated response. Configure GEMINI_API_KEY for real AI analysis.*`;\r\n}\r\n", "import type { Env, AiAnalyzeRequest, AiAnalyzeResponse } from '../core/types';\r\nimport { buildPrompt } from '../core/promptBuilder';\r\nimport { analyzeMarketContext } from '../integrations/gemini';\r\n\r\nexport async function handleAiAnalyzeRequest(\r\n    request: Request,\r\n    env: Env,\r\n    corsHeaders: Record<string, string>\r\n): Promise<Response> {\r\n    if (request.method !== 'POST') {\r\n        return new Response(JSON.stringify({ error: 'Method not allowed' }), {\r\n            status: 405,\r\n            headers: { 'Content-Type': 'application/json', ...corsHeaders },\r\n        });\r\n    }\r\n\r\n    try {\r\n        const body: AiAnalyzeRequest = await request.json();\r\n        const { assetType, symbol, timeframe, chartData, news, question } = body;\r\n\r\n        // Validate required fields\r\n        if (!assetType || !timeframe || !chartData || !news || !question) {\r\n            return new Response(\r\n                JSON.stringify({ error: 'Missing required fields' }),\r\n                {\r\n                    status: 400,\r\n                    headers: { 'Content-Type': 'application/json', ...corsHeaders },\r\n                }\r\n            );\r\n        }\r\n\r\n        // Build structured prompt\r\n        const prompt = buildPrompt({\r\n            assetType,\r\n            symbol,\r\n            timeframe,\r\n            chartData,\r\n            news,\r\n            question,\r\n        });\r\n\r\n        // Call Gemini\r\n        const answer = await analyzeMarketContext(\r\n            { assetType, symbol, timeframe, chartData, news, question },\r\n            prompt,\r\n            env\r\n        );\r\n\r\n        const response: AiAnalyzeResponse = { answer };\r\n\r\n        return new Response(JSON.stringify(response), {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...corsHeaders,\r\n            },\r\n        });\r\n    } catch (error) {\r\n        console.error('AI Analyze error:', error);\r\n        return new Response(\r\n            JSON.stringify({\r\n                error: 'Failed to analyze market data',\r\n                message: error instanceof Error ? error.message : 'Unknown error',\r\n            }),\r\n            {\r\n                status: 500,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    ...corsHeaders,\r\n                },\r\n            }\r\n        );\r\n    }\r\n}\r\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\EAMASTER\\\\marketmind\\\\worker\\\\.wrangler\\\\tmp\\\\bundle-rPuPWi\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\EAMASTER\\\\marketmind\\\\worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\EAMASTER\\\\marketmind\\\\worker\\\\.wrangler\\\\tmp\\\\bundle-rPuPWi\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\EAMASTER\\\\marketmind\\\\worker\\\\.wrangler\\\\tmp\\\\bundle-rPuPWi\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\EAMASTER\\\\marketmind\\\\worker\\\\src\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\EAMASTER\\\\marketmind\\\\worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\EAMASTER\\\\marketmind\\\\worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\EAMASTER\\\\marketmind\\\\worker\\\\src\\\\index.ts\";\n\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "import type { Env } from './core/types';\r\n\r\n// Router for Worker API endpoints\r\nexport default {\r\n    async fetch(request: Request, env: Env): Promise<Response> {\r\n        const url = new URL(request.url);\r\n        const path = url.pathname;\r\n\r\n        // CORS headers for all responses\r\n        const corsHeaders = {\r\n            'Access-Control-Allow-Origin': '*',\r\n            'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\r\n            'Access-Control-Allow-Headers': 'Content-Type',\r\n        };\r\n\r\n        // Handle preflight requests\r\n        if (request.method === 'OPTIONS') {\r\n            return new Response(null, { headers: corsHeaders });\r\n        }\r\n\r\n        try {\r\n            // Health check endpoint\r\n            if (path === '/api/health' || path === '/health') {\r\n                return jsonResponse({ status: 'ok', timestamp: new Date().toISOString() }, corsHeaders);\r\n            }\r\n\r\n            // Oil prices endpoint\r\n            if (path === '/api/oil' && request.method === 'GET') {\r\n                const { handleOilRequest } = await import('./routes/oil');\r\n                return await handleOilRequest(request, env, corsHeaders);\r\n            }\r\n\r\n            // Gold/metals prices endpoint\r\n            if (path === '/api/gold' && request.method === 'GET') {\r\n                const { handleGoldRequest } = await import('./routes/gold');\r\n                return await handleGoldRequest(request, env, corsHeaders);\r\n            }\r\n\r\n            // Stock prices endpoint\r\n            if (path === '/api/stocks' && request.method === 'GET') {\r\n                const { handleStocksRequest } = await import('./routes/stocks');\r\n                return await handleStocksRequest(request, env, corsHeaders);\r\n            }\r\n\r\n            // News endpoint\r\n            if (path === '/api/news' && request.method === 'GET') {\r\n                const { handleNewsRequest } = await import('./routes/news');\r\n                return await handleNewsRequest(request, env, corsHeaders);\r\n            }\r\n\r\n            // AI analysis endpoint\r\n            if (path === '/api/ai/analyze' && request.method === 'POST') {\r\n                const { handleAiAnalyzeRequest } = await import('./routes/aiAnalyze');\r\n                return await handleAiAnalyzeRequest(request, env, corsHeaders);\r\n            }\r\n\r\n            // 404 for unknown routes\r\n            return jsonResponse(\r\n                { error: 'Not Found', path },\r\n                corsHeaders,\r\n                404\r\n            );\r\n        } catch (error) {\r\n            console.error('Worker error:', error);\r\n            return jsonResponse(\r\n                {\r\n                    error: 'Internal Server Error',\r\n                    message: error instanceof Error ? error.message : 'Unknown error'\r\n                },\r\n                corsHeaders,\r\n                500\r\n            );\r\n        }\r\n    },\r\n};\r\n\r\n// Helper to create JSON responses\r\nfunction jsonResponse(data: any, headers: Record<string, string> = {}, status = 200): Response {\r\n    return new Response(JSON.stringify(data), {\r\n        status,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            ...headers,\r\n        },\r\n    });\r\n}\r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n"],
  "mappings": "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",
  "names": ["handleOilRequest", "handleGoldRequest", "handleStocksRequest", "handleNewsRequest", "handleAiAnalyzeRequest"]
}
